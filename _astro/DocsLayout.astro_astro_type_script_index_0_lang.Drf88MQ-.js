function w(){const c=window.location.pathname.replace(/^\/|\/$/g,"");document.querySelectorAll(".sidebar-link").forEach(e=>{const i=(e.getAttribute("href")||"").replace(/^\/|\/$/g,"")===c;e.classList.toggle("active",i),i?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")}),document.querySelectorAll(".sidebar-sublist").forEach(e=>e.remove());const r=Array.from(document.querySelectorAll(".content h2, .content h3, .content h4, .content h5, .content h6")).filter(e=>e.id).map(e=>({depth:parseInt(e.tagName[1]),slug:e.id,text:(e.textContent||"").trim()})),t=document.querySelector(".sidebar-link.active");if(t&&r.length>0){const e=document.createElement("ul");e.className="sidebar-sublist";for(const s of r){const i=document.createElement("li"),l=document.createElement("a");l.href=`#${s.slug}`,l.className=`sidebar-sublink depth-${s.depth}`,l.textContent=s.text,i.appendChild(l),e.appendChild(i)}t.after(e)}}document.addEventListener("astro:after-swap",w);const E='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>',C='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';let b=null;function L(){document.querySelectorAll(".content pre").forEach(n=>{if(n.querySelector(".copy-button"))return;const o=document.createElement("button");o.className="copy-button",o.innerHTML=E,o.setAttribute("aria-label","Copy code"),o.addEventListener("click",async()=>{const d=n.querySelector("code")?.textContent||"";await navigator.clipboard.writeText(d),o.innerHTML=C,o.classList.add("copied"),setTimeout(()=>{o.innerHTML=E,o.classList.remove("copied")},3e3)}),n.appendChild(o)});const c=document.getElementById("menu-button"),r=document.querySelector(".sidebar-container"),t=document.getElementById("sidebar-overlay");function e(n,o){n&&n.dataset.pragmastatBound!=="true"&&(n.dataset.pragmastatBound="true",n.addEventListener("click",o))}e(c,()=>{r?.classList.toggle("open"),t?.classList.toggle("open")}),e(t,()=>{r?.classList.remove("open"),t?.classList.remove("open")}),r?.classList.remove("open"),t?.classList.remove("open");const s=document.getElementById("sidebar-toggle"),i=document.getElementById("docs-layout");function l(n){const o=document.getElementById("docs-layout"),d=document.getElementById("sidebar-toggle");n?(document.documentElement.setAttribute("data-sidebar-collapsed",""),o?.setAttribute("data-sidebar-collapsed",""),d?.setAttribute("aria-expanded","false"),localStorage.setItem("pragmastat-sidebar-collapsed","true")):(document.documentElement.removeAttribute("data-sidebar-collapsed"),o?.removeAttribute("data-sidebar-collapsed"),d?.setAttribute("aria-expanded","true"),localStorage.removeItem("pragmastat-sidebar-collapsed"))}localStorage.getItem("pragmastat-sidebar-collapsed")==="true"&&(i?.setAttribute("data-sidebar-collapsed",""),s?.setAttribute("aria-expanded","false")),e(s,()=>{const n=document.getElementById("docs-layout")?.hasAttribute("data-sidebar-collapsed")??!1;l(!n)});const a=document.getElementById("sidebar-expand");e(a,()=>{l(!1)}),k(),A()}let y=null;function k(){y?.(),y=null;const c=document.querySelectorAll(".sidebar-sublink");if(c.length===0)return;const r=Array.from(c).map(i=>i.hash.slice(1));let t=!1;function e(){const i=window.scrollY,l=100;let u="";for(const a of r){const n=document.getElementById(a);n&&n.offsetTop-l<=i&&(u=a)}window.innerHeight+i>=document.body.scrollHeight-2&&(u=r[r.length-1]),c.forEach(a=>{a.classList.toggle("active",a.hash===`#${u}`)}),t=!1}function s(){t||(requestAnimationFrame(e),t=!0)}window.addEventListener("scroll",s),y=()=>window.removeEventListener("scroll",s),e()}async function A(){const c=document.querySelectorAll(".citation");if(c.length===0)return;if(!b)try{const a=await fetch("/references.json");if(!a.ok)return;b=await a.json()}catch{return}const r=b;let t=null,e=null,s=!1;function i(a,n){if(e&&(clearTimeout(e),e=null),t&&t.dataset.key===a.dataset.key)return;u(),t=document.createElement("div"),t.className="citation-popover",t.dataset.key=a.dataset.key;const o=document.createElement("div");o.className="citation-popover-title",o.textContent=n.title,t.appendChild(o);const d=document.createElement("div");if(d.className="citation-popover-authors",d.textContent=`${n.authors.join(", ")} (${n.year})`,t.appendChild(d),n.venue){const m=document.createElement("div");m.className="citation-popover-venue",m.textContent=n.venue,t.appendChild(m)}if(n.doi){const m=document.createElement("div");m.className="citation-popover-doi";const p=document.createElement("a");p.href=`https://doi.org/${encodeURIComponent(n.doi)}`,p.target="_blank",p.rel="noopener noreferrer",p.textContent=`DOI: ${n.doi}`,m.appendChild(p),t.appendChild(m)}t.addEventListener("mouseenter",()=>{s=!0,e&&(clearTimeout(e),e=null)}),t.addEventListener("mouseleave",()=>{s=!1,l()}),document.body.appendChild(t);const h=a.getBoundingClientRect(),f=t.getBoundingClientRect();let g=h.left,v=h.bottom+4;g+f.width>window.innerWidth-16&&(g=window.innerWidth-f.width-16),v+f.height>window.innerHeight-16&&(v=h.top-f.height-4),t.style.left=`${g}px`,t.style.top=`${v}px`}function l(){e||(e=setTimeout(()=>{s||u(),e=null},150))}function u(){t&&(t.remove(),t=null),s=!1}c.forEach(a=>{const n=a.dataset.key;if(!n)return;const o=r[n];o&&(a.addEventListener("mouseenter",()=>i(a,o)),a.addEventListener("mouseleave",l),a.addEventListener("click",d=>{d.preventDefault(),t?u():i(a,o)}))})}document.addEventListener("astro:page-load",L);
