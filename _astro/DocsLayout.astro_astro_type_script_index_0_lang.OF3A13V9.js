const k='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>',x='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>';document.querySelectorAll(".content pre").forEach(i=>{const o=document.createElement("button");o.className="copy-button",o.innerHTML=k,o.setAttribute("aria-label","Copy code"),o.addEventListener("click",async()=>{const s=i.querySelector("code")?.textContent||"";await navigator.clipboard.writeText(s),o.innerHTML=x,o.classList.add("copied"),setTimeout(()=>{o.innerHTML=k,o.classList.remove("copied")},3e3)}),i.appendChild(o)});const A=document.getElementById("menu-button"),C=document.querySelector(".sidebar-container"),w=document.getElementById("sidebar-overlay");A?.addEventListener("click",()=>{C?.classList.toggle("open"),w?.classList.toggle("open")});w?.addEventListener("click",()=>{C?.classList.remove("open"),w?.classList.remove("open")});const f=document.getElementById("sidebar-toggle"),g=document.getElementById("docs-layout");function L(i){i?(document.documentElement.setAttribute("data-sidebar-collapsed",""),g?.setAttribute("data-sidebar-collapsed",""),f?.setAttribute("aria-expanded","false"),localStorage.setItem("pragmastat-sidebar-collapsed","true")):(document.documentElement.removeAttribute("data-sidebar-collapsed"),g?.removeAttribute("data-sidebar-collapsed"),f?.setAttribute("aria-expanded","true"),localStorage.removeItem("pragmastat-sidebar-collapsed"))}const I=localStorage.getItem("pragmastat-sidebar-collapsed")==="true";I&&(g?.setAttribute("data-sidebar-collapsed",""),f?.setAttribute("aria-expanded","false"));f?.addEventListener("click",()=>{const i=g?.hasAttribute("data-sidebar-collapsed");L(!i)});const T=document.getElementById("sidebar-expand");T?.addEventListener("click",()=>{L(!1)});{const i=document.querySelectorAll(".sidebar-sublink");if(i.length>0){let o=function(){const n=window.scrollY,c=100;let u="";for(const d of s){const p=document.getElementById(d);p&&p.offsetTop-c<=n&&(u=d)}window.innerHeight+n>=document.body.scrollHeight-2&&(u=s[s.length-1]),i.forEach(d=>{d.classList.toggle("active",d.hash===`#${u}`)}),e=!1};const s=Array.from(i).map(n=>n.hash.slice(1));let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(o),e=!0)}),o()}}(async function(){const o=document.querySelectorAll(".citation");if(o.length===0)return;let s={};try{const t=await fetch("/references.json");if(!t.ok){console.warn("Failed to load references.json:",t.status);return}s=await t.json()}catch(t){console.warn("Could not load references.json",t);return}let e=null,n=null,c=!1;function u(t,a){if(n&&(clearTimeout(n),n=null),e&&e.dataset.key===t.dataset.key)return;p(),e=document.createElement("div"),e.className="citation-popover",e.dataset.key=t.dataset.key;const l=document.createElement("div");l.className="citation-popover-title",l.textContent=a.title,e.appendChild(l);const m=document.createElement("div");if(m.className="citation-popover-authors",m.textContent=`${a.authors.join(", ")} (${a.year})`,e.appendChild(m),a.venue){const r=document.createElement("div");r.className="citation-popover-venue",r.textContent=a.venue,e.appendChild(r)}if(a.doi){const r=document.createElement("div");r.className="citation-popover-doi";const v=document.createElement("a");v.href=`https://doi.org/${encodeURIComponent(a.doi)}`,v.target="_blank",v.rel="noopener noreferrer",v.textContent=`DOI: ${a.doi}`,r.appendChild(v),e.appendChild(r)}e.addEventListener("mouseenter",()=>{c=!0,n&&(clearTimeout(n),n=null)}),e.addEventListener("mouseleave",()=>{c=!1,d()}),document.body.appendChild(e);const b=t.getBoundingClientRect(),h=e.getBoundingClientRect();let y=b.left,E=b.bottom+4;y+h.width>window.innerWidth-16&&(y=window.innerWidth-h.width-16),E+h.height>window.innerHeight-16&&(E=b.top-h.height-4),e.style.left=`${y}px`,e.style.top=`${E}px`}function d(){n||(n=setTimeout(()=>{c||p(),n=null},150))}function p(){e&&(e.remove(),e=null),c=!1}o.forEach(t=>{const a=t.dataset.key;if(!a)return;const l=s[a];l&&(t.addEventListener("mouseenter",()=>u(t,l)),t.addEventListener("mouseleave",d),t.addEventListener("click",m=>{m.preventDefault(),e?p():u(t,l)}))})})();
